{"ast":null,"code":"import \"antd/es/button/style/css\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/input/style/css\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/icon/style/css\";\nimport _Icon from \"antd/es/icon\";\nvar _jsxFileName = \"D:\\\\-----------\\u5386\\u53F2\\u5B66\\u4E60--------\\\\\\u9AD8\\u7EA7node~~~11\\\\\\u81EA\\u6D4B\\\\\\u7EC3\\u4E60-react\\\\client-react\\\\src\\\\views\\\\login.js\";\nimport React, { Component } from 'react';\n\nfunction hasErrors(fieldsError) {\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\n}\n\nexport default class login extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.componentWillMount = () => {\n      this.$route = this.props.history.push;\n    };\n\n    this.state = {\n      username: '',\n      password: ''\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"login-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"login-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 18\n      },\n      __self: this\n    }, \"this is login left\"), React.createElement(\"div\", {\n      className: \"login-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19\n      },\n      __self: this\n    }, React.createElement(_Input, {\n      prefix: React.createElement(_Icon, {\n        type: \"user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21\n        },\n        __self: this\n      }),\n      placeholder: \"Username\",\n      onChange: e => this.setState({\n        username: e.target.value.trim()\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20\n      },\n      __self: this\n    }), React.createElement(_Input, {\n      prefix: React.createElement(_Icon, {\n        type: \"lock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      }),\n      placeholder: \"Password\",\n      onChange: e => this.setState({\n        password: e.target.value.trim()\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }), React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.headleLogin.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, \"Login in\")));\n  }\n\n  async headleLogin() {\n    let {\n      http\n    } = this;\n    let {\n      username,\n      password\n    } = this.state;\n    let res = await http('/login', {\n      username,\n      password\n    }, 'post');\n    const {\n      code,\n      msg,\n      data\n    } = res.data;\n    console.log(res.config.data.username);\n    alert(msg);\n\n    if (code === 1) {\n      // localStorage.setItem('name', JSON.parse(res.config.data.username));\n      localStorage.setItem('token', data);\n      this.$route('/home');\n    }\n  }\n\n}","map":{"version":3,"sources":["D:/-----------历史学习--------/高级node~~~11/自测/练习-react/client-react/src/views/login.js"],"names":["React","Component","hasErrors","fieldsError","Object","keys","some","field","login","componentWillMount","$route","props","history","push","state","username","password","render","e","setState","target","value","trim","headleLogin","bind","http","res","code","msg","data","console","log","config","alert","localStorage","setItem"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AAEA,SAASC,SAAT,CAAmBC,WAAnB,EAAgC;AAC5B,SAAOC,MAAM,CAACC,IAAP,CAAYF,WAAZ,EAAyBG,IAAzB,CAA8BC,KAAK,IAAIJ,WAAW,CAACI,KAAD,CAAlD,CAAP;AACH;;AAED,eAAe,MAAMC,KAAN,SAAoBP,SAApB,CAA8B;AAAA;AAAA;;AAAA,SACzCQ,kBADyC,GACpB,MAAM;AACvB,WAAKC,MAAL,GAAc,KAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAjC;AACH,KAHwC;;AAAA,SAIzCC,KAJyC,GAIjC;AACJC,MAAAA,QAAQ,EAAE,EADN;AAEJC,MAAAA,QAAQ,EAAE;AAFN,KAJiC;AAAA;;AAQzCC,EAAAA,MAAM,GAAG;AACL,WACI;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,EAEI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AACI,MAAA,MAAM,EAAE;AAAM,QAAA,IAAI,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADZ;AAEI,MAAA,WAAW,EAAC,UAFhB;AAGI,MAAA,QAAQ,EAAEC,CAAC,IACP,KAAKC,QAAL,CAAc;AACVJ,QAAAA,QAAQ,EAAEG,CAAC,CAACE,MAAF,CAASC,KAAT,CAAeC,IAAf;AADA,OAAd,CAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAUI;AACI,MAAA,MAAM,EAAE;AAAM,QAAA,IAAI,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADZ;AAEI,MAAA,WAAW,EAAC,UAFhB;AAGI,MAAA,QAAQ,EAAEJ,CAAC,IACP,KAAKC,QAAL,CAAc;AACVH,QAAAA,QAAQ,EAAEE,CAAC,CAACE,MAAF,CAASC,KAAT,CAAeC,IAAf;AADA,OAAd,CAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVJ,EAmBI;AAAQ,MAAA,IAAI,EAAC,SAAb;AAAuB,MAAA,OAAO,EAAE,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAnBJ,CAFJ,CADJ;AA4BH;;AACD,QAAMD,WAAN,GAAoB;AAChB,QAAI;AAAEE,MAAAA;AAAF,QAAW,IAAf;AACA,QAAI;AAAEV,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAAyB,KAAKF,KAAlC;AACA,QAAIY,GAAG,GAAG,MAAMD,IAAI,CAAC,QAAD,EAAW;AAAEV,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAAX,EAAmC,MAAnC,CAApB;AACA,UAAM;AAAEW,MAAAA,IAAF;AAAQC,MAAAA,GAAR;AAAaC,MAAAA;AAAb,QAAsBH,GAAG,CAACG,IAAhC;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACM,MAAJ,CAAWH,IAAX,CAAgBd,QAA5B;AACAkB,IAAAA,KAAK,CAACL,GAAD,CAAL;;AACA,QAAID,IAAI,KAAK,CAAb,EAAgB;AACZ;AACAO,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BN,IAA9B;AACA,WAAKnB,MAAL,CAAY,OAAZ;AACH;AACJ;;AAlDwC","sourcesContent":["import React, { Component } from 'react';\r\nimport { Icon, Input, Button } from 'antd';\r\nfunction hasErrors(fieldsError) {\r\n    return Object.keys(fieldsError).some(field => fieldsError[field]);\r\n}\r\n\r\nexport default class login extends Component {\r\n    componentWillMount = () => {\r\n        this.$route = this.props.history.push;\r\n    };\r\n    state = {\r\n        username: '',\r\n        password: '',\r\n    };\r\n    render() {\r\n        return (\r\n            <div className=\"login-wrapper\">\r\n                <div className=\"login-div\">this is login left</div>\r\n                <div className=\"login-box\">\r\n                    <Input\r\n                        prefix={<Icon type=\"user\" />}\r\n                        placeholder=\"Username\"\r\n                        onChange={e =>\r\n                            this.setState({\r\n                                username: e.target.value.trim(),\r\n                            })\r\n                        }\r\n                    />\r\n                    <Input\r\n                        prefix={<Icon type=\"lock\" />}\r\n                        placeholder=\"Password\"\r\n                        onChange={e =>\r\n                            this.setState({\r\n                                password: e.target.value.trim(),\r\n                            })\r\n                        }\r\n                    />\r\n                    <Button type=\"primary\" onClick={this.headleLogin.bind(this)}>\r\n                        Login in\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    async headleLogin() {\r\n        let { http } = this;\r\n        let { username, password } = this.state;\r\n        let res = await http('/login', { username, password }, 'post');\r\n        const { code, msg, data } = res.data;\r\n        console.log(res.config.data.username);\r\n        alert(msg);\r\n        if (code === 1) {\r\n            // localStorage.setItem('name', JSON.parse(res.config.data.username));\r\n            localStorage.setItem('token', data);\r\n            this.$route('/home');\r\n        }\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}