{"ast":null,"code":"import \"antd/es/table/style/css\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/input/style/css\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/divider/style/css\";\nimport _Divider from \"antd/es/divider\";\nimport \"antd/es/button/style/css\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/modal/style/css\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/select/style/css\";\nimport _Select from \"antd/es/select\";\nvar _jsxFileName = \"D:\\\\-----------\\u5386\\u53F2\\u5B66\\u4E60--------\\\\\\u9AD8\\u7EA7node~~~11\\\\\\u81EA\\u6D4B\\\\\\u7EC3\\u4E60-react\\\\client-react\\\\src\\\\views\\\\home\\\\userList.js\";\nimport React, { Component } from 'react';\nconst {\n  Option\n} = _Select;\nconst {\n  confirm\n} = _Modal;\nexport default class List extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      visible: false,\n      isLook: false,\n      id: 0,\n      item: '',\n      username: '',\n      password: '',\n      indent: '',\n      rolelist: [],\n      dataList: [],\n      columns: [{\n        title: '用户名',\n        dataIndex: 'username',\n        key: 'username'\n      }, {\n        title: '密码',\n        dataIndex: 'password',\n        key: 'password'\n      }, {\n        title: '角色',\n        dataIndex: 'indent',\n        key: 'indent'\n      }, {\n        title: 'Action',\n        key: 'action',\n        render: (text, record) => React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36\n          },\n          __self: this\n        }, React.createElement(_Button, {\n          onClick: this.headle.bind(this, record),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }, \"\\u67E5\\u770B\"), ' ', React.createElement(_Modal, {\n          title: \"\\u67E5\\u770B\",\n          visible: this.state.isLook,\n          onOk: this.headleLook.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43\n          },\n          __self: this\n        }, \"\\u7528\\u6237Id\\uFF1A\", this.state.item.id), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, \"\\u7528\\u6237\\u540D\\uFF1A\", this.state.item.username), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }, \"\\u5BC6\\u7801\\uFF1A\", this.state.item.password), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }, \"\\u8EAB\\u4EFD\\uFF1A\", this.state.item.indent)), React.createElement(_Divider, {\n          type: \"vertical\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        }), React.createElement(_Button, {\n          type: \"primary\",\n          onClick: this.showModal.bind(this, record),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        }, \"\\u7F16\\u8F91\"), React.createElement(_Modal, {\n          title: \"\\u7F16\\u8F91\",\n          visible: this.state.visible,\n          onOk: this.handleOk.bind(this, record),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, React.createElement(_Input, {\n          value: this.state.username,\n          placeholder: \"\\u7528\\u6237\\u540D\",\n          onChange: e => this.setState({\n            username: e.target.value.trim()\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        })), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, React.createElement(_Input, {\n          value: this.state.password,\n          placeholder: \"\\u5BC6\\u7801\",\n          onChange: e => this.setState({\n            password: e.target.value.trim()\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        })), React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, React.createElement(_Select, {\n          defaultValue: \"\\u8EAB\\u4EFD\",\n          style: {\n            width: 120\n          },\n          onChange: this.handleChange.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, this.state.rolelist.map(item => {\n          return React.createElement(Option, {\n            value: item.role,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 86\n            },\n            __self: this\n          }, \"\\u8BBF\\u5BA2\");\n        })))), React.createElement(_Divider, {\n          type: \"vertical\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }), React.createElement(_Button, {\n          onClick: this.showConfirm.bind(this, record),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, \"\\u5220\\u9664\"))\n      }]\n    };\n\n    this.showModal = record => {\n      this.setState({\n        visible: true,\n        username: record.username,\n        password: record.password\n      });\n    };\n\n    this.handleOk = async record => {\n      this.setState({\n        visible: false\n      });\n      const {\n        username,\n        password,\n        indent\n      } = this.state;\n      let res = await this.http('/edit', {\n        username,\n        password,\n        indent,\n        id: record.id\n      }, 'put');\n      const {\n        code,\n        msg\n      } = res.data;\n      alert(msg);\n\n      if (code === 1) {\n        this.initList();\n      }\n    };\n  }\n\n  handleChange(value) {\n    this.setState({\n      indent: value\n    });\n  }\n\n  // 删除\n  showConfirm(record) {\n    const that = this;\n    confirm({\n      title: '确认删除此信息吗',\n\n      async onOk() {\n        let res = await that.http('/del', {\n          id: record.id\n        }, 'delete');\n        const {\n          code\n        } = res.data;\n\n        if (code === 1) {\n          that.initList();\n        }\n      }\n\n    });\n  } // 查看\n\n\n  headle(record) {\n    this.setState({\n      item: record,\n      isLook: true\n    });\n  }\n\n  headleLook() {\n    this.setState({\n      isLook: false\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      style: {\n        marginBottom: '10px'\n      },\n      onClick: () => this.$route('/home/add'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"\\u6DFB\\u52A0\"), React.createElement(_Table, {\n      rowKey: (a, index) => index,\n      columns: this.state.columns,\n      dataSource: this.state.dataList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }));\n  }\n\n  async componentDidMount() {\n    this.initList();\n    this.initRole();\n  }\n\n  componentWillMount() {\n    this.$route = this.props.history.push;\n  }\n\n  async initList() {\n    let res = await this.http('/getList', '', 'get');\n    const {\n      code,\n      data\n    } = res.data;\n\n    if (code === 1) {\n      this.setState({\n        dataList: data\n      });\n    }\n  }\n\n  async initRole() {\n    let res = await this.http('/getRole', '', 'get');\n    const {\n      code,\n      data\n    } = res.data;\n\n    if (code === 1) {\n      this.setState({\n        rolelist: data\n      });\n    }\n  }\n\n}","map":{"version":3,"sources":["D:/-----------历史学习--------/高级node~~~11/自测/练习-react/client-react/src/views/home/userList.js"],"names":["React","Component","Option","confirm","List","state","visible","isLook","id","item","username","password","indent","rolelist","dataList","columns","title","dataIndex","key","render","text","record","headle","bind","headleLook","showModal","handleOk","e","setState","target","value","trim","width","handleChange","map","role","showConfirm","res","http","code","msg","data","alert","initList","that","onOk","marginBottom","$route","a","index","componentDidMount","initRole","componentWillMount","props","history","push"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Table, Divider, Modal, Button, Input, Select } from 'antd';\r\nconst { Option } = Select;\r\nconst { confirm } = Modal;\r\nexport default class List extends Component {\r\n    state = {\r\n        visible: false,\r\n        isLook: false,\r\n        id: 0,\r\n        item: '',\r\n        username: '',\r\n        password: '',\r\n        indent: '',\r\n        rolelist: [],\r\n        dataList: [],\r\n        columns: [\r\n            {\r\n                title: '用户名',\r\n                dataIndex: 'username',\r\n                key: 'username',\r\n            },\r\n            {\r\n                title: '密码',\r\n                dataIndex: 'password',\r\n                key: 'password',\r\n            },\r\n            {\r\n                title: '角色',\r\n                dataIndex: 'indent',\r\n                key: 'indent',\r\n            },\r\n            {\r\n                title: 'Action',\r\n                key: 'action',\r\n                render: (text, record) => (\r\n                    <span>\r\n                        <Button onClick={this.headle.bind(this, record)}>查看</Button>{' '}\r\n                        <Modal\r\n                            title=\"查看\"\r\n                            visible={this.state.isLook}\r\n                            onOk={this.headleLook.bind(this)}\r\n                        >\r\n                            <p>用户Id：{this.state.item.id}</p>\r\n                            <p>用户名：{this.state.item.username}</p>\r\n                            <p>密码：{this.state.item.password}</p>\r\n                            <p>身份：{this.state.item.indent}</p>\r\n                        </Modal>\r\n                        <Divider type=\"vertical\" />\r\n                        <Button type=\"primary\" onClick={this.showModal.bind(this, record)}>\r\n                            编辑\r\n                        </Button>\r\n                        <Modal\r\n                            title=\"编辑\"\r\n                            visible={this.state.visible}\r\n                            onOk={this.handleOk.bind(this, record)}\r\n                        >\r\n                            <p>\r\n                                <Input\r\n                                    value={this.state.username}\r\n                                    placeholder=\"用户名\"\r\n                                    onChange={e =>\r\n                                        this.setState({\r\n                                            username: e.target.value.trim(),\r\n                                        })\r\n                                    }\r\n                                />\r\n                            </p>\r\n                            <p>\r\n                                <Input\r\n                                    value={this.state.password}\r\n                                    placeholder=\"密码\"\r\n                                    onChange={e =>\r\n                                        this.setState({\r\n                                            password: e.target.value.trim(),\r\n                                        })\r\n                                    }\r\n                                />\r\n                            </p>\r\n                            <li>\r\n                                <Select\r\n                                    defaultValue=\"身份\"\r\n                                    style={{ width: 120 }}\r\n                                    onChange={this.handleChange.bind(this)}\r\n                                >\r\n                                    {this.state.rolelist.map(item => {\r\n                                        return <Option value={item.role}>访客</Option>;\r\n                                    })}\r\n                                </Select>\r\n                            </li>\r\n                        </Modal>\r\n                        <Divider type=\"vertical\" />\r\n                        <Button onClick={this.showConfirm.bind(this, record)}>删除</Button>\r\n                    </span>\r\n                ),\r\n            },\r\n        ],\r\n    };\r\n\r\n    handleChange(value) {\r\n        this.setState({\r\n            indent: value,\r\n        });\r\n    }\r\n    showModal = record => {\r\n        this.setState({\r\n            visible: true,\r\n            username: record.username,\r\n            password: record.password,\r\n        });\r\n    };\r\n    // 编辑\r\n    handleOk = async record => {\r\n        this.setState({\r\n            visible: false,\r\n        });\r\n        const { username, password, indent } = this.state;\r\n        let res = await this.http('/edit', { username, password, indent, id: record.id }, 'put');\r\n        const { code, msg } = res.data;\r\n        alert(msg);\r\n        if (code === 1) {\r\n            this.initList();\r\n        }\r\n    };\r\n    // 删除\r\n    showConfirm(record) {\r\n        const that = this;\r\n        confirm({\r\n            title: '确认删除此信息吗',\r\n            async onOk() {\r\n                let res = await that.http('/del', { id: record.id }, 'delete');\r\n                const { code } = res.data;\r\n                if (code === 1) {\r\n                    that.initList();\r\n                }\r\n            },\r\n        });\r\n    }\r\n    // 查看\r\n    headle(record) {\r\n        this.setState({\r\n            item: record,\r\n            isLook: true,\r\n        });\r\n    }\r\n    headleLook() {\r\n        this.setState({\r\n            isLook: false,\r\n        });\r\n    }\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Button style={{ marginBottom: '10px' }} onClick={() => this.$route('/home/add')}>\r\n                    添加\r\n                </Button>\r\n\r\n                <Table\r\n                    rowKey={(a, index) => index}\r\n                    columns={this.state.columns}\r\n                    dataSource={this.state.dataList}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n    async componentDidMount() {\r\n        this.initList();\r\n        this.initRole();\r\n    }\r\n    componentWillMount() {\r\n        this.$route = this.props.history.push;\r\n    }\r\n    async initList() {\r\n        let res = await this.http('/getList', '', 'get');\r\n        const { code, data } = res.data;\r\n        if (code === 1) {\r\n            this.setState({\r\n                dataList: data,\r\n            });\r\n        }\r\n    }\r\n    async initRole() {\r\n        let res = await this.http('/getRole', '', 'get');\r\n        const { code, data } = res.data;\r\n        if (code === 1) {\r\n            this.setState({\r\n                rolelist: data,\r\n            });\r\n        }\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}